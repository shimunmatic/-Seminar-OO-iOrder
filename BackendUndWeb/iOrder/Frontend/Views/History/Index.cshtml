@model IEnumerable<OrderModel>
@{
    ViewData["Title"] = "History";
}

<style>
    #ordersList {
        overflow-y: auto;
    }
</style>

<div class="container">
    <div class="row">
        <div class="col-sm-4">

            <div id="ordersList" class="list-group">
                @foreach (var order in Model)
{
            <a class="list-group-item orderItem" href="@order.Id">
                <span class="badge">
                    @order.Date
                </span>
                @order.Location.Name
            </a>
}
            </div>

        </div>

        <div class="col-sm-8">
            <div id="orderDetailsContainer">
                Select an order
            </div>
        </div>
    </div>
</div>




<script src="~/lib/jquery/dist/jquery.js"></script>
<script type="text/javascript">

    $(document).ready(function () {

        // Fetch orders for the first time
        refreshListeners();

        function refreshListeners() {
           $(".orderItem").click(function (e) {
                e.preventDefault();
                var orderId = $(this).attr("href");
                $("#orderDetailsContainer").load('@Url.Action("Partial", "History")'+"/"+orderId);
            });
        }

        // track width, set to window width
        var height = $(window).height();
        var ordersList = $("#ordersList");
        ordersList.css('max-height', (height - 100) + 'px');

        $(window).resize(function () {
            if ($(window).height() == height) return;
            height = $(window).height();
            var newheight = height - 100;
            ordersList.css('max-height', newheight + 'px');
        });

    });
</script>